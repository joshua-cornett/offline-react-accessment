<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: hooks/useValidateName.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: hooks/useValidateName.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { useState, useEffect } from 'react';
import { isNameValid as API_validateName } from '../mock-api/apis'; // Import mock API functionality
import { useDebounce } from './useDebouncing'; // Import custom debouncer hook

/**
 * Custom hook to validate name with a mock API call.
 * Handles and maintains validation state.
 *
 * @returns {object} An object containing:
 * - name (string): Current 'name' input value.
 * - setName (Function): 'name' setter.
 * - isNameValid (boolean|null): Validation status
 * - validating (boolean): Flag for whether the validation process is running.
 * - validateName (Function): Function to trigger validation.
 */
export const useValidateName = () => {
  const [name, setName] = useState('');
  const [isNameValid, setIsNameValid] = useState(null);
  const [validating, setValidating] = useState(false);
  const debouncedName = useDebounce(name, 500); // Debounce name input

  useEffect(() => {
    if (name) {
      // Indicate validating state as soon as user types
      setValidating(true);
    }
  }, [name]); // Triggers on every change to 'name'

  useEffect(() => {
    if (debouncedName) {
      // Perform the validation only after the debounce period
      const performValidation = async () => {
        try {
          const result = await API_validateName(debouncedName); // mock API call
          setIsNameValid(result); // Update validity with result
        } catch (error) {
          console.error('Error validating name:', error);
          setIsNameValid(false); // Negate validity on error
        } finally {
          setValidating(false); // Indicate validation end
        }
      };

      performValidation();
    } else {
      // Handle case where debouncedName is an empty string, indicating no input
      setIsNameValid(null);
      setValidating(false);
    }
  }, [debouncedName]);

  /**
   * Validates a name input by making a mock API call
   * @param {string} nameToValidate - The name input to be validated.
   */
  const validateName = async (nameToValidate) => {
    setValidating(true); // Indicate validation start
    try {
      const result = await API_validateName(nameToValidate); // mock API name validation call
      setIsNameValid(result); // Update status
    } catch (error) {
      console.error('Error validating name:', error);
      setIsNameValid(false); // Negate status in case of error
    } finally {
      setValidating(false); // Indicate validation end
    }
  };

  return {
    name,
    setName,
    isNameValid,
    validating,
    validateName,
  };
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#EntriesTable">EntriesTable</a></li><li><a href="global.html#Form">Form</a></li><li><a href="global.html#Location">Location</a></li><li><a href="global.html#Name">Name</a></li><li><a href="global.html#getLocations">getLocations</a></li><li><a href="global.html#isNameValid">isNameValid</a></li><li><a href="global.html#root">root</a></li><li><a href="global.html#useDebounce">useDebounce</a></li><li><a href="global.html#useLocations">useLocations</a></li><li><a href="global.html#useValidateName">useValidateName</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Apr 23 2024 13:27:37 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
